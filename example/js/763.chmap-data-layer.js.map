{"version":3,"file":"763.chmap-data-layer.js","mappings":"sOAGQA,EAAcC,EAAAA,cAAAA,UAEhBC,EAAoB,IAAIC,EAAAA,QAAAA,kBAE1BC,EAAQ,KAERC,EAAY,KAEhB,SAASC,EAAiBC,EAAKC,EAAOC,EAAIC,GACtCR,EAAkBS,GAAGJ,EAAKC,EAAOC,EAAIC,GCPzC,IAAQE,EAAiBT,EAAAA,QAAAA,aAEnBD,EAAoB,IAAIC,EAAAA,QAAAA,kBAE1BU,GAAc,EAElB,SAASP,EAAiBC,EAAKC,EAAOC,EAAIC,GACtCR,EAAkBS,GAAGJ,EAAKC,EAAOC,EAAIC,GAGzC,SAASI,EAAKC,GAEVC,EAAAA,QAAAA,OAEIH,IAEAI,EAAqB,SAAS,SAACC,GAE3BhB,EAAkBiB,KAAlB,QAAgCD,MAIpCD,EAAqB,UAAU,SAACC,GAE5BhB,EAAkBiB,KAAlB,SAAiCD,MAIrCL,GAAc,GAGlB,IAKMO,EAAa,mCAAG,WAAOC,EAAMC,GAAb,wEAElBN,EAAAA,QAAAA,OAFkB,SAIa,wCAJb,cAIVO,aAEKT,KAAKO,EAAMC,GANN,2CAAH,wDASnBV,EAAaY,MAAMT,GAdF,SAACM,IDyBtB,SAAcA,GA9Cd,IAEUI,EA8CFrB,KA9CEqB,EAAMC,SAASC,cAAc,QAkB/BC,UAhBM,giBAkBVF,SAASG,KAAKC,OAAOL,GAMzB,SAA+BA,GAE3BpB,EAAYoB,EAAIM,cAAc,mBAE9B,IAAMC,EAAcP,EAAIQ,WAExB7B,EAAQ,IAAIJ,EAAUgC,GAMtBA,EAAa1B,iBAAiB,uBAAuB,WACjDJ,EAAkBiB,KAAK,SAAUa,MAjBrCE,CAAsBT,IA4BtBpB,EAAUuB,UAAYP,EAEtBjB,EAAMU,OAENZ,EAAkBiB,KAAK,QAASf,EAAM+B,UClClClB,CAAuBI,GACvBL,EAAAA,QAAAA,SAY+BI","sources":["webpack://chmapDataLayer/./src/js/floating-panel/year-metadata-panel.js","webpack://chmapDataLayer/./src/js/floating-panel/year-metadata-controller.js"],"sourcesContent":["\nimport { Commons, BootstrapWrap } from '@chmap/utilities';\n\nconst { Offcanvas } = BootstrapWrap;\n\nconst localEventEmitter = new Commons.EventEmitterClass();\n\nlet panel = null;\n\nlet panelBody = null;\n\nfunction addEventListener(obj, types, fn, context) {\n    localEventEmitter.on(obj, types, fn, context);\n}\n\nfunction createUI(){\n\n    const div = document.createElement('div');\n\n    const html =\n`<div \n     id=\"data-layer-year-metadata-panel\"\n     class=\"offcanvas offcanvas-end\"\n     style=\"width:40%;\"\n     data-bs-scroll=\"true\"\n     data-bs-backdrop=\"false\"\n     tabindex=\"-1\"\n     aria-labelledby=\"offcanvasScrollingLabel\">\n    <div class=\"offcanvas-header pb-0\">\n        <h5 class=\"offcanvas-title\">Year Metadata</h5>\n        <i class=\"bi bi-chevron-right btn-outline-success px-1\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\" ></i>\n    </div>\n    <div class=\"offcanvas-body\" style=\"padding-top:0.5rem;\"></div>\n</div>`;\n\n    div.innerHTML = html;\n\n    document.body.append(div);\n\n    bindPointersAndEvents(div);\n\n}\n\nfunction bindPointersAndEvents(div) {\n\n    panelBody = div.querySelector('.offcanvas-body');\n\n    const offCanvasDom= div.firstChild;\n\n    panel = new Offcanvas(offCanvasDom);\n\n    // offCanvasDom.addEventListener('shown.bs.offcanvas', () => {\n    //     localEventEmitter.emit('shown', offCanvasDom);\n    // });\n\n    offCanvasDom.addEventListener('hidden.bs.offcanvas', () => {\n        localEventEmitter.emit('hidden', offCanvasDom);\n    });\n\n}\n\nfunction show(info){\n\n    if(!panel){\n        createUI();\n    }\n\n    panelBody.innerHTML = info;\n\n    panel.show();\n\n    localEventEmitter.emit('shown', panel._element);\n}\n\nexport {\n    show,\n    addEventListener as on,\n}\n\n/* Events\n\n    { name: 'shown', params: panelDom-Object }\n    { name: 'hidden', params: panelDom-Object }\n\n*/\n","\nimport * as YearMetaDataPanel from \"./year-metadata-panel\";\n\nimport { Commons, Spinner } from '@chmap/utilities';\n\nconst { YearMetadata } = Commons;\n\nconst localEventEmitter = new Commons.EventEmitterClass();\n\nlet initialized = false;\n\nfunction addEventListener(obj, types, fn, context) {\n    localEventEmitter.on(obj, types, fn, context);\n}\n\nfunction show(year){\n\n    Spinner.show();\n\n    if(!initialized) {\n\n        YearMetaDataPanel.on('shown', (panelDOM) => {\n\n            localEventEmitter.emit(`shown`, panelDOM);\n\n        });\n\n        YearMetaDataPanel.on('hidden', (panelDOM) => {\n\n            localEventEmitter.emit(`hidden`, panelDOM);\n\n        });\n\n        initialized = true;\n    }\n\n    const callback = (info) => {\n        YearMetaDataPanel.show(info);\n        Spinner.hide();\n    }\n\n    const errorCallback = async (info, type) => {\n\n        Spinner.hide();\n\n        const { Notification } = await import(\"@chmap/utilities\");\n\n        Notification.show(info, type);\n    }\n\n    YearMetadata.query(year, callback, errorCallback);\n\n}\n\nexport {\n    show,\n    addEventListener as on,\n}\n\n/* Events\n\n    { name: 'shown', params: panelDom-Object }\n    { name: 'hidden', params: panelDom-Object }\n\n*/\n"],"names":["Offcanvas","BootstrapWrap","localEventEmitter","Commons","panel","panelBody","addEventListener","obj","types","fn","context","on","YearMetadata","initialized","show","year","Spinner","YearMetaDataPanel","panelDOM","emit","errorCallback","info","type","Notification","query","div","document","createElement","innerHTML","body","append","querySelector","offCanvasDom","firstChild","bindPointersAndEvents","_element"],"sourceRoot":""}