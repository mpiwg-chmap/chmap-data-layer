{"version":3,"file":"843.chmap-data-layer.js","mappings":"8ZAEA,IAAQA,EAAsBC,EAAAA,UAAAA,kBAEtBC,EAAUC,EAAAA,cAAAA,MAEZC,EAAkB,WAEpB,IAAIC,EAAQ,KAIZ,SAASC,IAEL,IA4BMC,EAAMC,SAASC,cAAc,OAEnCF,EAAIG,UAAY,aAChBH,EAAII,UA/BM,0zCAiCVH,SAASI,KAAKC,OAAON,GAErBA,EAAIO,cAAc,eAAeC,QAAUC,EAQ/C,SAA2BT,GAEvB,IAF4B,I,w4BAAA,CAEZA,EAAIU,iBAAiB,kBAFT,IAI5B,2BAA4B,QACnBF,QAAU,SAACG,GAEZA,EAAEC,iBAEF,IAAMC,EAASF,EAAEE,OAEXC,EAAMrB,EAAoBoB,EAAOE,GAEjCC,EAAQH,EAAOI,cAAcA,cAAcV,cAAc,kBAE/DS,EAAME,MAAQJ,EAEdE,EAAMG,QACNH,EAAMI,WAAaJ,EAAMK,aAlBL,+BAN5BC,CAAkBtB,GAElBF,EAAQH,EAAM4B,oBAAoBvB,GA/CP,SA4EhBS,IA5EgB,uEA4E/B,6FAEUK,EAAM,MAAAhB,EAAM0B,SAASjB,cAAc,kBAAkBW,OAA/C,QAFhB,SAIyC,8BAJzC,QAIYO,EAJZ,OAIYA,oBAEWX,EAAK,WAN5B,4CA5E+B,sBA0G/B,MAAO,CACHY,KArBJ,SAAcC,GAEL7B,GACDC,IAKJD,EAAM4B,QAcNE,KAVJ,WAEQ9B,GACAA,EAAM8B,SArGM","sources":["webpack://chmapDataLayer/./src/js/file-import/online-file-modal.js"],"sourcesContent":["\nimport { Constants, BootstrapWrap } from '@chmap/utilities';\nconst { EXAMPLE_FILES_DIR } = Constants;\n\nconst { Modal } = BootstrapWrap;\n\nconst OnlineFileModal = function() {\n\n    let modal = null;\n\n    let gCallback = null\n\n    function creat() {\n\n        const html =\n`<div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\">Import online data</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"mb-3\">\n            <label class=\"form-label\" for=\"onlineDataUrl\">*Url</label>\n            <input type=\"text\" id=\"onlineDataUrl\" class=\"form-control\" value=\"\">\n        </div>\n         <br>\n        <pre>\nCHMap supports three file formats:\n1. CSV (<a id=\"open-logart-books.csv\" class=\"example-file\" href=\"#\">example-text</a>, <a id=\"my-collection.csv\" class=\"example-file\" href=\"#\">example-images</a>) \n   The required columns are: name, latitude, longitude and date. \n   If imageURL column is provided, the image markers will be displayed on the map.\n2. GeoJson (<a id=\"geo-json-eagles.json\" class=\"example-file\" href=\"#\">example-eagles</a>)\n3. IIIF manifest.json (<a id=\"iiif-general-images.json\" class=\"example-file\"  href=\"#\">example-images</a>, <a id=\"iiif-map-images.json\" class=\"example-file\" href=\"#\">example-maps</a>)\n        </pre>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-primary import-btn\">Import</button>\n      </div>\n    </div>\n </div>`;\n\n        const div = document.createElement('div');\n\n        div.className = 'modal fade';\n        div.innerHTML = html;\n\n        document.body.append(div);\n\n        div.querySelector('.import-btn').onclick = onImport;\n\n        setExampleFileURL(div);\n\n        modal = Modal.getOrCreateInstance(div);\n\n    }\n\n    function setExampleFileURL(div) {\n\n        const hyLinks = div.querySelectorAll('.example-file');\n\n        for (const link of hyLinks) {\n            link.onclick = (e) => {\n\n                e.preventDefault();\n\n                const target = e.target;\n\n                const url = EXAMPLE_FILES_DIR + target.id;\n\n                const input = target.parentElement.parentElement.querySelector('#onlineDataUrl');\n\n                input.value = url;\n\n                input.focus();\n                input.scrollLeft = input.scrollWidth;\n\n            }\n        }\n\n    }\n\n    async function onImport() {\n\n        const url = modal._element.querySelector('#onlineDataUrl').value.trim();\n\n        const { loadOnlineDataFile } = await import('./file-loader');\n\n        loadOnlineDataFile(url, 'unknown');\n\n    }\n\n    function show(callback) {\n\n        if (!modal) {\n            creat();\n        }\n\n        gCallback = callback;\n\n        modal.show();\n\n    }\n\n    function hide() {\n\n        if (modal) {\n            modal.hide();\n        }\n\n    }\n\n    return {\n        show,\n        hide,\n    }\n\n}();\n\nexport { OnlineFileModal };\n"],"names":["EXAMPLE_FILES_DIR","Constants","Modal","BootstrapWrap","OnlineFileModal","modal","creat","div","document","createElement","className","innerHTML","body","append","querySelector","onclick","onImport","querySelectorAll","e","preventDefault","target","url","id","input","parentElement","value","focus","scrollLeft","scrollWidth","setExampleFileURL","getOrCreateInstance","_element","loadOnlineDataFile","show","callback","hide"],"sourceRoot":""}